erDiagram
    USERS {
        bigint id PK "AUTO_INCREMENT"
        varchar email "UNIQUE NOT NULL"
        varchar password "NOT NULL"
        varchar full_name "NOT NULL"
        varchar phone_number
        enum role "admin,owner,user,guest"
        boolean is_active "DEFAULT true"
        varchar profile_picture_url
        timestamp email_verified_at
        varchar verification_token
        timestamp created_at
        timestamp updated_at
    }
    
    USER_ADDRESSES {
        bigint id PK "AUTO_INCREMENT"
        bigint user_id FK "NOT NULL"
        varchar address "NOT NULL"
        boolean is_primary "DEFAULT false"
        timestamp created_at
        timestamp updated_at
    }
    
    HOTELS {
        bigint id PK "AUTO_INCREMENT"
        bigint owner_id FK "NOT NULL"
        varchar name "NOT NULL"
        text description
        varchar address "NOT NULL"
        decimal latitude "DECIMAL(10,8)"
        decimal longitude "DECIMAL(11,8)"
        int star_rating "DEFAULT 0"
        enum status "pending,approved,rejected,suspended"
        timestamp approved_at
        bigint approved_by FK
        timestamp created_at
        timestamp updated_at
    }
    
    HOTEL_IMAGES {
        bigint id PK "AUTO_INCREMENT"
        bigint hotel_id FK "NOT NULL"
        varchar image_url "NOT NULL"
        int display_order "DEFAULT 0"
        boolean is_primary "DEFAULT false"
        timestamp uploaded_at
    }
    
    ROOM_TYPES {
        bigint id PK "AUTO_INCREMENT"
        bigint hotel_id FK "NOT NULL"
        varchar name "NOT NULL"
        text description
        int max_occupancy "NOT NULL"
        int bed_count "DEFAULT 1"
        enum bed_type "single,double,queen,king,sofa_bed"
        decimal room_size "DECIMAL(5,2)"
        enum size_unit "sqm,sqft"
        boolean is_active "DEFAULT true"
        timestamp created_at
        timestamp updated_at
    }
    
    ROOM_TYPE_IMAGES {
        bigint id PK "AUTO_INCREMENT"
        bigint room_type_id FK "NOT NULL"
        varchar image_url "NOT NULL"
        int display_order "DEFAULT 0"
        timestamp uploaded_at
    }
    
    ROOMS {
        bigint id PK "AUTO_INCREMENT"
        bigint room_type_id FK "NOT NULL"
        varchar room_number "NOT NULL"
        int floor_number
        enum status "available,occupied,maintenance,out_of_order"
        text maintenance_notes
        timestamp created_at
        timestamp updated_at
    }
    
    PRICING_PLANS {
        bigint id PK "AUTO_INCREMENT"
        bigint room_type_id FK "NOT NULL"
        varchar plan_name "NOT NULL"
        decimal base_price "DECIMAL(10,2) NOT NULL"
        decimal weekend_price "DECIMAL(10,2)"
        boolean is_refundable "DEFAULT true"
        int cancellation_hours "DEFAULT 24"
        decimal cancellation_fee "DECIMAL(10,2) DEFAULT 0"
        boolean includes_breakfast "DEFAULT false"
        boolean includes_wifi "DEFAULT true"
        date valid_from
        date valid_to
        boolean is_active "DEFAULT true"
        timestamp created_at
        timestamp updated_at
    }
    
    BOOKINGS {
        bigint id PK "AUTO_INCREMENT"
        varchar booking_reference "UNIQUE NOT NULL"
        bigint user_id FK "NOT NULL"
        bigint hotel_id FK "NOT NULL"
        bigint room_id FK "NOT NULL"
        bigint pricing_plan_id FK "NOT NULL"
        date check_in_date "NOT NULL"
        date check_out_date "NOT NULL"
        int guest_count "NOT NULL"
        int adult_count "NOT NULL"
        int child_count "DEFAULT 0"
        decimal subtotal "DECIMAL(10,2) NOT NULL"
        decimal tax_amount "DECIMAL(10,2) DEFAULT 0"
        decimal total_amount "DECIMAL(10,2) NOT NULL"
        enum status "pending,confirmed,checked_in,checked_out,cancelled,no_show"
        text special_requests
        text cancellation_reason
        timestamp cancelled_at
        timestamp confirmed_at
        timestamp checked_in_at
        timestamp checked_out_at
        timestamp created_at
        timestamp updated_at
    }
    
    GUEST_DETAILS {
        bigint id PK "AUTO_INCREMENT"
        bigint booking_id FK "NOT NULL"
        varchar first_name "NOT NULL"
        varchar last_name "NOT NULL"
        varchar email
        varchar phone_number
        varchar id_number
        enum id_type "passport,national_id,driving_license"
        date date_of_birth
        enum guest_type "primary,additional"
        timestamp created_at
    }
    
    PAYMENTS {
        bigint id PK "AUTO_INCREMENT"
        bigint booking_id FK "NOT NULL"
        varchar transaction_id "UNIQUE"
        decimal amount "DECIMAL(10,2) NOT NULL"
        enum payment_method "credit_card,debit_card,paypal,bank_transfer,cash"
        enum status "pending,processing,completed,failed,refunded,cancelled"
        enum payment_type "booking,deposit,additional_charges,refund"
        text gateway_response
        varchar gateway_transaction_id
        timestamp payment_date
        timestamp created_at
        timestamp updated_at
    }
    
    REVIEWS {
        bigint id PK "AUTO_INCREMENT"
        bigint booking_id FK "NOT NULL"
        bigint user_id FK "NOT NULL"
        bigint hotel_id FK "NOT NULL"
        int cleanliness_rating "CHECK (cleanliness_rating BETWEEN 1 AND 5)"
        int service_rating "CHECK (service_rating BETWEEN 1 AND 5)"
        int location_rating "CHECK (location_rating BETWEEN 1 AND 5)"
        int value_rating "CHECK (value_rating BETWEEN 1 AND 5)"
        int facilities_rating "CHECK (facilities_rating BETWEEN 1 AND 5)"
        decimal overall_rating "DECIMAL(2,1)"
        text comment
        boolean is_anonymous "DEFAULT false"
        enum status "pending,approved,rejected"
        timestamp approved_at
        bigint approved_by FK
        timestamp created_at
        timestamp updated_at
    }
    
    PROMOTIONS {
        bigint id PK "AUTO_INCREMENT"
        bigint hotel_id FK
        varchar title "NOT NULL"
        text description
        varchar promo_code "UNIQUE"
        enum discount_type "percentage,fixed_amount"
        decimal discount_value "DECIMAL(10,2) NOT NULL"
        decimal min_booking_amount "DECIMAL(10,2)"
        decimal max_discount_amount "DECIMAL(10,2)"
        int min_nights
        int usage_limit
        int usage_count "DEFAULT 0"
        date valid_from "NOT NULL"
        date valid_to "NOT NULL"
        boolean is_active "DEFAULT true"
        timestamp created_at
        timestamp updated_at
    }
    
    BOOKING_PROMOTIONS {
        bigint booking_id FK "NOT NULL"
        bigint promotion_id FK "NOT NULL"
        decimal discount_applied "DECIMAL(10,2) NOT NULL"
        timestamp applied_at
    }
    
	ROLE {
        int id PK "AUTO_INCREMENT"
        bigint user_id FK "NOT NULL"
        varchar name "NOT NULL"
        text description "NOT NULL" 
    }
    

    
    %% Relationships
    USERS ||--o{ USER_ADDRESSES : "has"
    USERS ||--o{ HOTELS : "owns"
    USERS ||--o{ BOOKINGS : "makes"
    USERS ||--o{ REVIEWS : "writes" 
	USERS ||--o{ ROLE : "has" 
    USERS ||--o{ HOTELS : "approves(admin)"
    USERS ||--o{ REVIEWS : "approves(admin)" 
    
    HOTELS ||--o{ HOTEL_IMAGES : "has"
    HOTELS ||--o{ ROOM_TYPES : "offers" 
    HOTELS ||--o{ PROMOTIONS : "creates" 
    HOTELS ||--o{ BOOKINGS : "receives"
    HOTELS ||--o{ REVIEWS : "receives"
    
    
    ROOM_TYPES ||--o{ ROOM_TYPE_IMAGES : "has"
    ROOM_TYPES ||--o{ ROOMS : "categorizes"
    ROOM_TYPES ||--o{ PRICING_PLANS : "has"
    
    ROOMS ||--o{ BOOKINGS : "is_booked"
    
    PRICING_PLANS ||--o{ BOOKINGS : "applies_to"
    
    BOOKINGS ||--o{ GUEST_DETAILS : "includes"
    BOOKINGS ||--o{ PAYMENTS : "has"
    BOOKINGS ||--o{ REVIEWS : "generates"
    BOOKINGS ||--o{ BOOKING_PROMOTIONS : "uses"
    
    PROMOTIONS ||--o{ BOOKING_PROMOTIONS : "is_applied_to"